<div class="container py-5">
  <form action="/ajustes" method="POST" class="p-5 shadow rounded bg-white mx-auto" style="max-width: 550px;">
    <!-- Título do Formulário -->
    <h3 class="text-center mb-4 text-primary font-weight-bold">Ajuste de Estoque</h3>

    <!-- Produto -->
    <div class="mb-3">
      <label for="produtoId" class="form-label text-dark fw-bold">Produto</label>
      <select name="produtoId" class="form-select" required>
        <option value="" disabled selected>Selecione um produto</option>
        {{#each produtos}}
          <option value="{{this.id}}">{{this.nome}}</option>
        {{/each}}
      </select>
    </div>

    <!-- Tipo de Ajuste -->
    <div class="mb-3">
      <label for="tipo" class="form-label text-dark fw-bold">Tipo de Ajuste</label>
      <select name="tipo" class="form-select" required>
        <option value="" disabled selected>Selecione o tipo de ajuste</option>
        <option value="entrada">Entrada</option>
        <option value="saida">Saída</option>
      </select>
    </div>

    <!-- Quantidade -->
    <div class="mb-3">
      <label for="quantidade" class="form-label text-dark fw-bold">Quantidade</label>
      <div class="input-group">
        <input type="number" name="quantidade" class="form-control" required min="1" placeholder="Digite a quantidade">
        <span class="input-group-text bg-primary text-white">unidades</span>
      </div>
    </div>

    <!-- Campo de Data (oculto) -->
    <input type="hidden" name="data" value="{{currentDate}}">

    <!-- Botões -->
    <div class="d-flex justify-content-between mt-4">
      <a href="/produtos" class="btn btn-outline-secondary rounded-pill px-4">Cancelar</a>
      <button type="submit" class="btn btn-primary rounded-pill px-4">Confirmar Ajuste</button>
    </div>
  </form>
</div>

<style>
  body {
    background-color: #f4f7fa;
    font-family: 'Poppins', sans-serif;
  }

  .container {
    max-width: 600px;
  }

  .form-label {
    font-size: 1rem;
  }

  .form-control, .form-select, .input-group-text {
    border-radius: 0.75rem;
  }

  .btn-primary {
    background-color: #007bff;
    border: none;
    font-weight: bold;
  }

  .btn-primary:hover {
    background-color: #0056b3;
  }

  .btn-outline-secondary {
    font-weight: bold;
  }

  .shadow {
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  }
</style>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        {{#if error_msg}}
            Swal.fire({
                icon: 'error',
                title: 'Erro',
                text: '{{error_msg}}',
                confirmButtonText: 'Ok'
            });
        {{/if}}
        
        {{#if success_msg}}
            Swal.fire({
                icon: 'success',
                title: 'Sucesso',
                text: '{{success_msg}}',
                confirmButtonText: 'Ok'
            });
        {{/if}}
    });
</script>
