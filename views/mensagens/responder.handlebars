<h2 class="text-center my-4 text-primary">Responder Mensagem - <strong>{{mensagem.assunto}}</strong></h2>

  <form action="/mensagens/{{mensagem.id}}/responder" method="POST" class="needs-validation" novalidate enctype="multipart/form-data">

<div class="container shadow-lg p-5 rounded bg-light">
  <!-- Informações do remetente -->
  <div class="row mb-4">
    <div class="col-md-6">
      <p class="fw-bold mb-1"><i class="bi bi-person-fill"></i> Para:</p>
      <p>{{mensagem.remetente.nome}} <span class="text-muted">({{mensagem.remetente.cargo}})</span></p>
    </div>
  </div>

  <!-- Formulário de Resposta -->

    <!-- Corpo da Mensagem -->
    <div class="mb-4">
      <label for="corpo" class="form-label h5 text-secondary"><i class="bi bi-chat-text-fill"></i> Mensagem:</label>
      <textarea name="corpo" id="corpo" class="form-control shadow-sm" rows="5" placeholder="Escreva sua mensagem aqui..." required></textarea>
      <div class="invalid-feedback">Por favor, insira a mensagem.</div>
    </div>

        <!-- Arquivo -->
        <div class="mb-4">
            <label for="arquivo" class="form-label h5 text-secondary"><i class="bi bi-file-earmark"></i> Anexo:</label>
            <input type="file" name="arquivo" id="arquivo" class="form-control shadow-sm" accept=".jpg,.png,.pdf" >
        </div>

    <!-- Botões de Ação -->
    <div class="d-flex justify-content-center gap-4">
      <button type="submit" class="btn btn-success btn-lg shadow-lg px-4 py-2">
        <i class="bi bi-send-fill"></i> Enviar Resposta
      </button>
      <a href="/mensagens" class="btn btn-outline-dark btn-lg shadow-sm px-4 py-2">
        <i class="bi bi-arrow-left-circle"></i> Voltar
      </a>
    </div>
  </form>
</div>

<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<script>
  (function () {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');

    Array.from(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();
</script>
