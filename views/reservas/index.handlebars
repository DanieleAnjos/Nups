<div class="container mt-5">
    <!-- Título da página -->
    <h2 class="text-center text-primary my-4">Reserva de Salas</h2>

    <!-- Botão Cadastrar Reserva -->
    <div class="d-flex justify-content-end mb-3">
        <a href="/reservas/create" class="btn btn-success">
            <i class="bi bi-calendar-plus"></i> Cadastrar Reserva
        </a>
    </div>

<form action="/reservas" method="GET" class="mb-4 p-4 border rounded shadow-sm bg-light">
    <div class="row g-3">
        <!-- Campo de Data -->
        <div class="col-md-4">
            <label for="data" class="form-label">Data</label>
            <input type="date" name="data" id="data" class="form-control" placeholder="Data" value="{{query.data}}">
        </div>

        <!-- Campo de Sala -->
        <div class="col-md-4">
            <label for="salaId" class="form-label">Sala</label>
            <select name="salaId" id="salaId" class="form-select">
                <option value="">Todas as Salas</option>
                {{#each salas}}
                    <option value="{{id}}" {{#if (eq id ../query.salaId)}}selected{{/if}}>{{nome}}</option>
                {{/each}}
            </select>
        </div>

        <!-- Campo de Profissional -->
        <div class="col-md-4">
            <label for="profissionalId" class="form-label">Profissional</label>
            <select name="profissionalId" id="profissionalId" class="form-select">
                <option value="">Todos os Profissionais</option>
                {{#each profissionais}}
                    <option value="{{id}}" {{#if (eq id ../query.profissionalId)}}selected{{/if}}>{{nome}}</option>
                {{/each}}
            </select>
        </div>
    </div>

    <div class="row g-3 mt-3">
        <!-- Botões -->
        <div class="col-12 d-flex justify-content-end">
            <button type="submit" class="btn btn-primary me-2">Filtrar</button>
            <a href="/reservas" class="btn btn-secondary">Limpar</a>
        </div>
    </div>
</form>


    <!-- Tabela de Reservas -->
    <div class="table-responsive shadow-sm">
        <table class="table table-hover table-bordered mt-3 align-middle">
            <thead class="table-primary text-center">
                <tr>
                    <th>Data</th>
                    <th>Sala</th>
                    <th>Profissional</th>
                    <th>Horário Inicial</th>
                    <th>Horário Final</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {{#if reservas.length}}
                    {{#each reservas}}
                        <tr>
                            <td>{{formatDate data}}</td>
                            <td>{{sala.nome}}</td>
                            <td>{{profissionalNome}}</td>
                            <td>{{formatTime horarioInicial}}</td>
                            <td>{{formatTime horarioFinal}}</td>
                            <td class="text-center">
                                <a href="/reservas/{{id}}/edit" class="btn btn-warning btn-sm mx-1 shadow-sm">
                                    <i class="bi bi-pencil-square"></i> Editar
                                </a>
                                <form action="/reservas/{{id}}?_method=DELETE" method="POST" class="d-inline">
                                    <input type="hidden" name="_csrf" value="{{csrfToken}}">
                                    <button type="submit" class="btn btn-danger btn-sm mx-1 shadow-sm" onclick="return confirm('Você tem certeza que deseja deletar esta reserva?');">
                                        <i class="bi bi-trash"></i> Deletar
                                    </button>
                                </form>
                            </td>
                        </tr>
                    {{/each}}
                {{else}}
                {{/if}}
            </tbody>
        </table>
    </div>
            {{#if (eq reservas.length 0)}}
            <div class="alert alert-info text-center" role="alert">
                Nenhuma reserva encontrada.
            </div>
        {{/if}}
</div>

