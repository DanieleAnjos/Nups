<h1>Criar Profissional</h1>
<form action="/profissionais" method="POST">
    <label for="nome">Nome:</label>
    <input type="text" name="nome" required>
    
    <label for="email">Email:</label>
    <input type="email" name="email" required>
    
    <label for="matricula">Matrícula:</label>
    <input type="number" name="matricula" required>
    
    <label for="dataAdmissao">Data de Admissão:</label>
    <input type="date" name="dataAdmissao" required>
    
    <label for="cargo">Cargo:</label>
    <select name="cargo" required>
        <option value="Assistente social">Assistente social</option>
        <option value="Administrador">Administrador</option>
        <option value="Psicólogo">Psicólogo</option>
        <option value="Psiquiatra">Psiquiatra</option>
    </select>
    
    <label for="vinculo">Vínculo:</label>
    <select name="vinculo" required>
        <option value="Servidor">Servidor</option>
        <option value="Voluntario">Voluntário</option>
    </select>
    
    <label for="cpf">CPF:</label>
    <input type="text" name="cpf" required pattern="\d{11}" title="Deve conter 11 dígitos">
    
    <label for="dataNascimento">Data de Nascimento:</label>
    <input type="date" name="dataNascimento" required>
    
    <label for="sexo">Sexo:</label>
    <input type="text" name="sexo" required>
    
    <label for="cep">CEP:</label>
    <input type="text" name="cep" required pattern="\d{8}" title="Deve conter 8 dígitos" id="cep">
    
    <label for="endereco">Endereço:</label>
    <input type="text" name="endereco" required id="endereco">
    
    <label for="bairro">Bairro:</label>
    <input type="text" name="bairro" required id="bairro">
    
    <label for="cidade">Cidade:</label>
    <input type="text" name="cidade" required id="cidade">
    
    <label for="estado">Estado:</label>
    <input type="text" name="estado" required id="estado" readonly> <!-- Campo de estado agora é um input readonly -->
    
    <label for="numero">Número:</label>
    <input type="text" name="numero" required>
    
    <label for="complemento">Complemento:</label>
    <input type="text" name="complemento">
    
    <label for="telefone">Telefone:</label>
    <input type="text" name="telefone" required pattern="\d{10,11}" title="Deve conter 10 ou 11 dígitos">
    
    <label for="tipoTelefone">Tipo de Telefone:</label>
    <select name="tipoTelefone" required>
        <option value="Celular">Celular</option>
        <option value="Residencial">Residencial</option>
        <option value="Comercial">Comercial</option>
    </select>
    
    <label for="usuario">Usuário:</label>
    <input type="text" name="usuario" required>
    
    <label for="senha">Senha:</label>
    <input type="password" name="senha" required>
    
    <label for="contatoEmergenciaNome">Contato de Emergência (Nome):</label>
    <input type="text" name="contatoEmergenciaNome">
    
    <label for="telefoneContatoEmergencia">Contato de Emergência (Telefone):</label>
    <input type="text" name="telefoneContatoEmergencia">
    
    <button type="submit">Criar Profissional</button>
</form>

<script>
document.getElementById('cep').addEventListener('blur', async function() {
    const cep = this.value.replace(/\D/g, ''); // Remove caracteres não numéricos
    if (cep.length === 8) {
        try {
            const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
            const data = await response.json();
            if (!data.erro) {
                document.getElementById('endereco').value = data.logradouro;
                document.getElementById('bairro').value = data.bairro;
                document.getElementById('cidade').value = data.localidade;
                // Preenchendo automaticamente o estado
                document.getElementById('estado').value = data.uf; // Preenche o campo estado
            } else {
                alert('CEP não encontrado.');
            }
        } catch (error) {
            alert('Erro ao buscar endereço. Tente novamente.');
        }
    } else {
        alert('CEP deve conter 8 dígitos.');
    }
});
</script>
